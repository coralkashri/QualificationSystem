angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",["$injector","$parse","$compile",function(a,b,c){return{restrict:"A",link:function(d,e,f,g){function h(b){return!!(b&&"invalid-message"in b.attributes)&&a.get(b.attributes["invalid-message"].value)}function i(a){for(var b=h(a),c=0;c<a.length;c++)c in a&&j(a[c],b)}function j(a,b){"validate-on"in a.attributes&&"blur"===a.attributes["validate-on"].value&&angular.element(a).on("blur",function(){n(a,b),q(a)});var c=d.$watch(function(){return a.value+a.required+v.submitted+m(a)+k(v[a.name])+l(v[a.name])},function(){if(v.submitted)n(a,b),q(a);else{var c="validate-on"in a.attributes&&"dirty"===a.attributes["validate-on"].value;c?(n(a,b),q(a)):v[a.name]&&v[a.name].$pristine&&(n(a,b),q(a))}});u.push(c)}function k(a){if(a&&"$dirty"in a)return a.$dirty}function l(a){if(a&&"$valid"in a)return a.$valid}function m(a){if("validator"in a.attributes){var b=d.$eval(a.attributes.validator.value);return v[a.name].$setValidity("angularValidator",b),b}}function n(a,b){var c=function(){return"<i class='fa fa-times'></i> Required"},d=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in v){var e=v[a.name],f=p(a);f&&f.remove(),"angular-validator-quiet"in t.attributes||"angular-validator-quiet"in a.attributes||(e.$dirty||v.submitted)&&(e.$error.required?"required-message"in a.attributes?angular.element(a).after(o(a.attributes["required-message"].value)):angular.element(a).after(o(c)):e.$valid||("invalid-message"in a.attributes?angular.element(a).after(o(a.attributes["invalid-message"].value)):b?angular.element(a).after(o(b.message(e,a))):angular.element(a).after(o(d))))}}function o(a){return"<label class='control-label has-error validationMessage'>"+d.$eval(a)+"</label>"}function p(a){for(var b=angular.element(a).parent().children(),c=0;c<b.length;c++)if(angular.element(b[c]).hasClass("validationMessage"))return angular.element(b[c]);return!1}function q(a){if(a.name in v){var b=v[a.name];angular.element(a).removeClass("has-error"),angular.element(a.parentNode).removeClass("has-error"),(b.$dirty||v.submitted)&&b.$invalid&&(angular.element(a.parentNode).addClass("has-error"),angular.element(a).addClass("has-error"))}}var r=function(){return Math.floor(1e5*Math.random())},s=!1;if(angular.forEach(e.find("input,select,textarea"),function(a){a=$(a),a.attr("name")||(a.attr("name",r()),console.log("WARNING! AngularValidator -> One of your form elements(<input>, <textarea>, <select>) is missing a name. We got your back and added a name, but if you want a pretty one you should add it yourself."),s=!0)}),f.name||(e.attr("name","TGAV_FORM_"+r()),console.log("WARNING! AngularValidator -> Your form element(<form>) is missing a name. We got your back and added a name, but if you want a pretty one you should add it yourself."),s=!0),s)return void c(e)(d);var t=angular.element(e)[0],u=[],v=b(f.name)(d);v.submitted=!1,d.$watch(function(){return Object.keys(v).length},function(){angular.forEach(u,function(a){a()}),i(t)}),e.on("submit",function(a){a.preventDefault(),d.$apply(function(){v.submitted=!0}),v.$valid&&d.$apply(function(){d.$eval(f.angularValidatorSubmit)})}),v.reset=function(){angular.forEach(t,function(a){a.name&&v[a.name]&&(v[a.name].$setViewValue(""),v[a.name].$render())}),v.submitted=!1,v.$setPristine()},i(t)}}}]);